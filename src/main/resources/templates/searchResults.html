<!DOCTYPE HTML>
<html lang="en"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <title>Books of the Community</title><!-- Page title -->
    <link rel="stylesheet" type="text/css" href="/static/css/style.css" th:href="@{~/css/style.css}">
    <link href="/static/css/rating.css" media="all" rel="stylesheet" th:href="@{~/css/rating.css}" type="text/css">
    <meta name="viewport" content-type="width=device-width initial-scale=1">
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<div class="card img-fluid" style="width:1600px">
    <img class="card-img-top" src="/static/images/header.jpg" style="max-width:100%" th:src="@{~/images/header.jpg}">
    <div class="card-img-overlay">
        <div class="Header">
            <h1>Bookworms Community</h1><!-- Heather title -->
            <h6>The place were bookworms meet and wormnomnom!</h6>
        </div>
    </div>
</div>

<div id="header">
    <ul id="navigation"><!--Navigation bar -->
        <script>
            $(document).ready(function(){
                $('[data-toggle="tooltip"]').tooltip();
            });
        </script>
        <li><a class="#" th:href="@{/communityBooks/byRating}" data-toggle="tooltip" data-placement="bottom" title="Top Rated Books for Bookworms">Top Rated Books</a></li>
        <li><a class="#" th:href="@{/communityBooks/byDate}" data-toggle="tooltip" data-placement="bottom" title="Latest Books added to our collection">Latest Books</a></li>
        <li><a class="#" th:href="@{/communityBooks/forSale}" data-toggle="tooltip" data-placement="bottom" title="Buy a book from a bookworm">Buy a book</a></li>
        <li><a class="#" th:href="@{/communityBooks/forSale}" data-toggle="tooltip" data-placement="bottom" title="Rent a book from a bookworm">Rent a book</a></li>
        <li><a class="#" th:href="@{/communityBooks}" data-toggle="tooltip" data-placement="bottom" title="A list of all the books">Community Books</a></li>
        <li style="float:right">
            <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
                <form class="form-inline" th:action="@{/searchBooks}" method="get" th:object="${searchWord}">
                    <input class="form-control mr-sm-2" type="text" placeholder="Search" th:field="*{searchPattern}">
                    <button class="btn btn-success" type="submit">Search</button>
                </form>
            </nav>
        </li>
        <!--User bar -->
        <li style="float:right"><a class="Home" th:href="@{/}" data-toggle="tooltip" data-placement="bottom" title="Home"><i class="fa fa-home" aria-hidden="true"></i></a></li>
        <li sec:authorize="isAnonymous()" style="float:right"><a class="Log In" th:href="@{/login}" data-toggle="tooltip" data-placement="bottom" title="Log In"><i class="fa fa-sign-in"></i></a></li>
        <li sec:authorize="isAuthenticated()" style="float:right"><a class="Log Out" th:href="@{/logout}" data-toggle="tooltip" data-placement="bottom" title="Log Out"><i class="fa fa-sign-out"></i></a></li>
        <li style="float:right"><a class="User profile" th:href="@{/user}" data-toggle="tooltip" data-placement="bottom" title="My profile" ><i class="fa fa-user"></i></a></li>
        <li sec:authorize="isAuthenticated()" style="float:right"><a class="Messages" th:href="@{/messages}" data-toggle="tooltip" data-placement="bottom" title="My messages" ><i class="fa fa-envelope"></i></a></li>
    </ul>
</div>
<!--End of navigation bar -->
<div class="container">
    <div class="row">
        <h3 th:if="${booksOfAuthors.isEmpty() && booksOfType.isEmpty() && booksWithName.isEmpty()}">No Results...</h3>
        <h6 th:if="${not booksWithName.isEmpty()}">The name of the following books matches your search: </h6>
        <table th:if="${not booksWithName.isEmpty()}" class="table table-striped table-hover">
            <thead>
            <tr class="table-primary">
                <th>Cover</th>
                <th>Book Name</th>
                <th>Author</th>
                <th>Number of Pages</th>
                <th>Type</th>
                <th>Language</th>
                <th>Condition</th>
                <th>For Rent</th>
                <th>Rent Price (RON/day)</th>
                <th>For Sale</th>
                <th>Sale Price (RON)</th>
                <th>Rating</th>
            </tr>
            </thead>
            <tbody th:each="book : ${booksWithName}">
            <th:block>
                <tr class="table-info">
                    <td><img style="max-height: 80px; max-width: 40px" alt="Book Cover Photo" th:src="'data:image/*;base64,' + ${book.getImageAsString()}"></td>
                    <td><a style="color: #000;" th:href="@{/bookDetails/{id}(id=${book.id})}"><b th:text="${book.bookName}"></b></a></td>
                    <td th:text="${book.authorName}"></td>
                    <td th:text="${book.numberOfPages}">></td>
                    <td th:text="${book.type}"></td>
                    <td th:text="${book.language}"></td>
                    <td th:text="${book.condition}"></td>
                    <td th:text="${book.bookRent} ? 'YES' : 'NO'"></td>
                    <td th:text="${book.bookRent} ? ${book.rentPrice} : ' '"></td>
                    <td th:text="${book.bookSale} ? 'YES' : 'NO'"></td>
                    <td th:text="${book.bookSale} ? ${book.sellPrice} : ' '"></td>
                    <td>
                        <th:block th:switch="${book.rating}">
                            <div th:case="5"><span class="stars-container stars-100">★★★★★</span></div>
                            <div th:case="4"><span class="stars-container stars-80">★★★★★</span></div>
                            <div th:case="3"><span class="stars-container stars-60">★★★★★</span></div>
                            <div th:case="2"><span class="stars-container stars-40">★★★★★</span></div>
                            <div th:case="1"><span class="stars-container stars-20">★★★★★</span></div>
                            <div th:case="0"><span class="stars-container stars-0">★★★★★</span></div>
                        </th:block>
                    </td>
                </tr>
            </th:block>
            </tbody>
        </table>
        <br>
        <h6 th:if="${not booksOfAuthors.isEmpty()}">The Author of the following books matches your search: </h6>
        <table th:if="${not booksOfAuthors.isEmpty()}" class="table table-striped table-hover">
            <thead>
            <tr class="table-primary">
                <th>Cover</th>
                <th>Book Name</th>
                <th>Author</th>
                <th>Number of Pages</th>
                <th>Type</th>
                <th>Language</th>
                <th>Condition</th>
                <th>For Rent</th>
                <th>Rent Price (RON/day)</th>
                <th>For Sale</th>
                <th>Sale Price (RON)</th>
                <th>Rating</th>
            </tr>
            </thead>
            <tbody th:each="book : ${booksOfAuthors}">
            <th:block>
                <tr class="table-info">
                    <td><img style="max-height: 80px; max-width: 40px" alt="Book Cover Photo" th:src="'data:image/*;base64,' + ${book.getImageAsString()}"></td>
                    <td><a style="color: #000;" th:href="@{/bookDetails/{id}(id=${book.id})}"><b th:text="${book.bookName}"></b></a></td>
                    <td th:text="${book.authorName}"></td>
                    <td th:text="${book.numberOfPages}">></td>
                    <td th:text="${book.type}"></td>
                    <td th:text="${book.language}"></td>
                    <td th:text="${book.condition}"></td>
                    <td th:text="${book.bookRent} ? 'YES' : 'NO'"></td>
                    <td th:text="${book.bookRent} ? ${book.rentPrice} : ' '"></td>
                    <td th:text="${book.bookSale} ? 'YES' : 'NO'"></td>
                    <td th:text="${book.bookSale} ? ${book.sellPrice} : ' '"></td>
                    <td>
                        <th:block th:switch="${book.rating}">
                            <div th:case="5"><span class="stars-container stars-100">★★★★★</span></div>
                            <div th:case="4"><span class="stars-container stars-80">★★★★★</span></div>
                            <div th:case="3"><span class="stars-container stars-60">★★★★★</span></div>
                            <div th:case="2"><span class="stars-container stars-40">★★★★★</span></div>
                            <div th:case="1"><span class="stars-container stars-20">★★★★★</span></div>
                            <div th:case="0"><span class="stars-container stars-0">★★★★★</span></div>
                        </th:block>
                    </td>
                </tr>
            </th:block>
            </tbody>
        </table>
        <br>
        <h6 th:if="${not booksOfType.isEmpty()}">The Type of the following books matches your search: </h6>
        <table th:if="${not booksOfType.isEmpty()}" class="table table-striped table-hover">
            <thead>
            <tr class="table-primary">
                <th>Cover</th>
                <th>Book Name</th>
                <th>Author</th>
                <th>Number of Pages</th>
                <th>Type</th>
                <th>Language</th>
                <th>Condition</th>
                <th>For Rent</th>
                <th>Rent Price (RON/day)</th>
                <th>For Sale</th>
                <th>Sale Price (RON)</th>
                <th>Rating</th>
            </tr>
            </thead>
            <tbody th:each="book : ${booksOfType}">
            <th:block>
                <tr class="table-info">
                    <td><img style="max-height: 80px; max-width: 40px" alt="Book Cover Photo" th:src="'data:image/*;base64,' + ${book.getImageAsString()}"></td>
                    <td><a style="color: #000;" th:href="@{/bookDetails/{id}(id=${book.id})}"><b th:text="${book.bookName}"></b></a></td>
                    <td th:text="${book.authorName}"></td>
                    <td th:text="${book.numberOfPages}">></td>
                    <td th:text="${book.type}"></td>
                    <td th:text="${book.language}"></td>
                    <td th:text="${book.condition}"></td>
                    <td th:text="${book.bookRent} ? 'YES' : 'NO'"></td>
                    <td th:text="${book.bookRent} ? ${book.rentPrice} : ' '"></td>
                    <td th:text="${book.bookSale} ? 'YES' : 'NO'"></td>
                    <td th:text="${book.bookSale} ? ${book.sellPrice} : ' '"></td>
                    <td>
                        <th:block th:switch="${book.rating}">
                            <div th:case="5"><span class="stars-container stars-100">★★★★★</span></div>
                            <div th:case="4"><span class="stars-container stars-80">★★★★★</span></div>
                            <div th:case="3"><span class="stars-container stars-60">★★★★★</span></div>
                            <div th:case="2"><span class="stars-container stars-40">★★★★★</span></div>
                            <div th:case="1"><span class="stars-container stars-20">★★★★★</span></div>
                            <div th:case="0"><span class="stars-container stars-0">★★★★★</span></div>
                        </th:block>
                    </td>
                </tr>
            </th:block>
            </tbody>
        </table>
    </div>
</div>
<!--Footer -->
<div id="footer">
    <div class="card img-fluid" style="width:1600px">
        <img class="card-img-top" src="static/images/Footerv2.jpg" th:src="@{../images/Footerv2.jpg}" style="width:100%">
        <div class="card-img-overlay">
            <div class="text-right" style="margin-bottom:0">
                <h6>Bookworms Community</h6>
                <p>&copy; Copyright AIRS 2019 All Rights Reserved.</p>
            </div>
        </div>
    </div>
</div>
</body>
</html>